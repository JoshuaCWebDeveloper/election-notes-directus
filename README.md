# Election Notes - Directus

A prototype app that runs a PostgreSQL db and a Directus instance with some
custom extensions.

Election Notes introduces a framework for researching candidates and making
voting decisions. List candidates and issues, rank your issues by importance,
then rank each candidate's stance on each issue by how well it aligns with
yours.

## Dependencies

Only officially supported OS is `Ubuntu 20.04`.

Recent version of Docker must be installed.

## Run

### Start command

```base
docker compose up
```

### Stop command

`Ctrl-C` in terminal running start command, or

```base
docker compose down
```

### Getting Started

Access the Directus instances at `http://localhost:8055`.

Login with username `admin@example.com` and password `4dm1n`.

Navigate to the Content pane on the left side navbar to begin adding
Candidates, Issues, and Stances.

Once you've added some content, navigate to the Insights pane on the left side
navbar to view the visualizations.

## Development

### Install

#### Git

Include this project's custom git config:

```bash
git config --local include.path "${PWD}/.gitconfig"
```

#### nvm

Run:

```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
```

#### Autoenv

Installing autoenv eliminates the need to run `nvm use` every time you `cd` into the project.

Run:

```bash
curl -#fLo- 'https://raw.githubusercontent.com/hyperupcall/autoenv/master/scripts/install.sh' | sh
```

The above command will append a line to your `~/.bashrc` file that sources
`autoenv/activate.sh`. Add the following variables to your `~/.bashrc` file
immediately _before_ the source line:

```bash
AUTOENV_ENABLE_LEAVE=yes
AUTOENV_ENV_FILENAME=.autoenv
AUTOENV_ENV_LEAVE_FILENAME=.autoenv.leave
```

#### Project

Once all above dependencies are installed, run:

```bash
nvm use

npm install
```

### Working with `packages/data`

If you wish to modify or backup `packages/data` somehow, you may encounter permission issues.

Run `git prep-data` to reset permissions and prepare the directory for git versioning.

### Error mounting volume

If you encounter the following error:

```
Error response from daemon: error while mounting volume [...]  no such file or directory
```

delete the volumes by running

```bash
docker compose down -v
```

and then try again.

## About Nx

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

### Integrate with editors

Enhance your Nx experience by installing [Nx Console](https://nx.dev/nx-console) for your favorite editor. Nx Console
provides an interactive UI to view your projects, run tasks, generate code, and more! Available for VSCode, IntelliJ and
comes with a LSP for Vim users.

### Start the application

Run `npx nx serve db-ui` to start the development server. Happy coding!

### Build for production

Run `npx nx build db-ui` to build the application. The build artifacts are stored in the output directory (e.g. `dist/` or `build/`), ready to be deployed.

### Running tasks

To execute tasks with Nx use the following syntax:

```
npx nx <target> <project> <...options>
```

You can also run multiple targets:

```
npx nx run-many -t <target1> <target2>
```

..or add `-p` to filter specific projects

```
npx nx run-many -t <target1> <target2> -p <proj1> <proj2>
```

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/features/run-tasks).

### Set up CI!

Nx comes with local caching already built-in (check your `nx.json`). On CI you might want to go a step further.

-   [Set up remote caching](https://nx.dev/features/share-your-cache)
-   [Set up task distribution across multiple machines](https://nx.dev/nx-cloud/features/distribute-task-execution)
-   [Learn more how to setup CI](https://nx.dev/recipes/ci)

### Explore the project graph

Run `npx nx graph` to show the graph of the workspace.
It will show tasks that you can run with Nx.

-   [Learn more about Exploring the Project Graph](https://nx.dev/core-features/explore-graph)

### Connect with us!

-   [Join the community](https://nx.dev/community)
-   [Subscribe to the Nx Youtube Channel](https://www.youtube.com/@nxdevtools)
-   [Follow us on Twitter](https://twitter.com/nxdevtools)
